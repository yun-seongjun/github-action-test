name: PR Review Checklist
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  checklist-review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      id-token: write
    steps:
      - uses: actions/checkout@v5
        with:
          fetch-depth: 1

      - uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          prompt: |
            REPO: ${{ github.repository }}
            PR NUMBER: ${{ github.event.pull_request.number }}

            ë‹¤ìŒ PRì„ ì²´í¬ë¦¬ìŠ¤íŠ¸ì— ë”°ë¼ ê²€í† í•´ ì£¼ì„¸ìš”:

            ## ì½”ë“œ í’ˆì§ˆ
            - [ ] ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜
            - [ ] ì˜ë¯¸ìˆëŠ” ë³€ìˆ˜ ì´ë¦„ ì‚¬ìš©
            - [ ] DRY ì›ì¹™ ì¤€ìˆ˜
            - [ ] KISS ì›ì¹™ ì¤€ìˆ˜
            - [ ] YAGNI ì›ì¹™ ì¤€ìˆ˜

            1. PRì˜ ë³€ê²½ ì‚¬í•­ì„ ë¶„ì„í•˜ì„¸ìš”.
            2. ê°œì„ ì´ í•„ìš”í•œ ì½”ë“œì—ëŠ” ì¸ë¼ì¸ ëŒ“ê¸€ì„ ë‚¨ê¸°ì„¸ìš”.
            3. ìµœì¢… ìš”ì•½ì€ ë°˜ë“œì‹œ ì•„ë˜ ì–‘ì‹ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.

            ## ìµœì¢… ìš”ì•½ ì–‘ì‹ (ì´ í˜•ì‹ì„ ì •í™•íˆ ë”°ë¥´ì„¸ìš”)

            ## ğŸ“‹ PR ì½”ë“œ ë¦¬ë·° ê²°ê³¼

            | í•­ëª© | ìƒíƒœ | ë¹„ê³  |
            |------|------|------|
            | ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜ | âœ… / âš ï¸ / âŒ | ì„¤ëª… |
            | ì˜ë¯¸ìˆëŠ” ë³€ìˆ˜ ì´ë¦„ ì‚¬ìš© | âœ… / âš ï¸ / âŒ | ì„¤ëª… |
            | DRY ì›ì¹™ ì¤€ìˆ˜ | âœ… / âš ï¸ / âŒ | ì„¤ëª… |
            | KISS ì›ì¹™ ì¤€ìˆ˜ | âœ… / âš ï¸ / âŒ | ì„¤ëª… |
            | YAGNI ì›ì¹™ ì¤€ìˆ˜ | âœ… / âš ï¸ / âŒ | ì„¤ëª… |

            ### ğŸ“ ì¢…í•© ì˜ê²¬
            (ì „ì²´ì ì¸ ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ ìš”ì•½)

            ### ğŸ’¡ ê°œì„  ì œì•ˆ
            (ìˆëŠ” ê²½ìš°ì—ë§Œ ì‘ì„±)

            ìƒíƒœ í‘œì‹œ:
              - âœ… : ì¶©ì¡±
              - âš ï¸ : ë¶€ë¶„ ì¶©ì¡± (ê°œì„  ê¶Œì¥)
              - âŒ : ë¯¸ì¶©ì¡± (ìˆ˜ì • í•„ìš”)
          claude_args: |
            --allowedTools "mcp__github_inline_comment__create_inline_comment,Bash(gh pr comment:*),Bash(gh pr diff:*),Bash(gh pr view:*)"
