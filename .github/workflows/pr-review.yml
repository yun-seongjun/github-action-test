name: PR Review Checklist
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  checklist-review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      id-token: write
    steps:
      - uses: actions/checkout@v5
        with:
          fetch-depth: 1

      - uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          prompt: |
            REPO: ${{ github.repository }}
            PR NUMBER: ${{ github.event.pull_request.number }}

            ## ì‘ì—… ì§€ì‹œ

            ì´ PRì„ ì½”ë“œ í’ˆì§ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸ì— ë”°ë¼ ê²€í† í•˜ì„¸ìš”.

            ### ê²€í†  í•­ëª©
            1. ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜
            2. ì˜ë¯¸ìˆëŠ” ë³€ìˆ˜ ì´ë¦„ ì‚¬ìš©
            3. DRY ì›ì¹™ ì¤€ìˆ˜ (Don't Repeat Yourself)
            4. KISS ì›ì¹™ ì¤€ìˆ˜ (Keep It Simple, Stupid)
            5. YAGNI ì›ì¹™ ì¤€ìˆ˜ (You Aren't Gonna Need It)

            ### ìˆ˜í–‰í•  ì‘ì—…

            **1ë‹¨ê³„**: `gh pr diff ${{ github.event.pull_request.number }}`ë¡œ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”.

            **2ë‹¨ê³„**: ê°œì„ ì´ í•„ìš”í•œ íŠ¹ì • ì½”ë“œ ë¼ì¸ì—ëŠ” ì¸ë¼ì¸ ëŒ“ê¸€ì„ ë‚¨ê¸°ì„¸ìš”.

            **3ë‹¨ê³„**: ë°˜ë“œì‹œ `gh pr comment ${{ github.event.pull_request.number }} --body "..."` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ í˜•ì‹ì˜ ìµœì¢… ìš”ì•½ì„ PR ì½”ë©˜íŠ¸ë¡œ ë‚¨ê¸°ì„¸ìš”.

            ### ìµœì¢… ìš”ì•½ í˜•ì‹ (ì´ í˜•ì‹ì„ ì •í™•íˆ ì‚¬ìš©í•  ê²ƒ)
            ```
            ## ğŸ“‹ PR ì½”ë“œ ë¦¬ë·° ê²°ê³¼

            | í•­ëª© | ìƒíƒœ | ë¹„ê³  |
            |------|------|------|
            | ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜ | [ìƒíƒœ] | [ì„¤ëª…] |
            | ì˜ë¯¸ìˆëŠ” ë³€ìˆ˜ ì´ë¦„ ì‚¬ìš© | [ìƒíƒœ] | [ì„¤ëª…] |
            | DRY ì›ì¹™ ì¤€ìˆ˜ | [ìƒíƒœ] | [ì„¤ëª…] |
            | KISS ì›ì¹™ ì¤€ìˆ˜ | [ìƒíƒœ] | [ì„¤ëª…] |
            | YAGNI ì›ì¹™ ì¤€ìˆ˜ | [ìƒíƒœ] | [ì„¤ëª…] |

            ### ğŸ“ ì¢…í•© ì˜ê²¬
            [ì „ì²´ì ì¸ ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ ìš”ì•½]

            ### ğŸ’¡ ê°œì„  ì œì•ˆ
            [ìˆëŠ” ê²½ìš°ì—ë§Œ ì‘ì„±]
            ```

            ìƒíƒœ í‘œì‹œ ê¸°ì¤€:
              - âœ… : ì¶©ì¡±
              - âš ï¸ : ë¶€ë¶„ ì¶©ì¡± (ê°œì„  ê¶Œì¥)
              - âŒ : ë¯¸ì¶©ì¡± (ìˆ˜ì • í•„ìš”)

            **ì¤‘ìš”**: 3ë‹¨ê³„ì˜ PR ì½”ë©˜íŠ¸ ì‘ì„±ì„ ë°˜ë“œì‹œ ìˆ˜í–‰í•˜ì„¸ìš”.
          claude_args: |
            --allowedTools "mcp__github_inline_comment__create_inline_comment,Bash(gh pr comment:*),Bash(gh pr diff:*),Bash(gh pr view:*)"
